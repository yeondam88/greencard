"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var core_1 = require('@angular/core');
var index_1 = require('../../api/index');
var index_2 = require('./../navigation/index');
var ApplyComponent = (function () {
    function ApplyComponent(api) {
        this.api = api;
        this.state = 1;
        this.educations = [
            { id: 0, level: "Select Option", pass: false },
            { id: 1, level: "Middle School or below", pass: false },
            { id: 2, level: "High School", pass: true },
            { id: 3, level: "College", pass: true },
            { id: 4, level: "Grad School", pass: true }
        ];
        this.workExperiences = [
            { id: 0, level: "Select Option", pass: false, finish: false },
            { id: 1, level: "Less than 2 Years", pass: false, finish: true },
            { id: 2, level: "2 Years or More", pass: true, finish: false }
        ];
        this.maritals = [
            { id: 0, response: "Select Option", answer: "Select Option", status: false },
            { id: 1, response: "No", answer: "Single", status: false, },
            { id: 2, response: "Yes", answer: "Married", status: true }
        ];
        this.titles = [
            { id: 0, title: "Select a title" },
            { id: 1, title: "Mr" },
            { id: 2, title: "Ms" },
            { id: 3, title: "Doctor" }
        ];
        this.genders = [
            { id: 0, gender: "Select a gender" },
            { id: 1, gender: "Male" },
            { id: 2, gender: "Female" }
        ];
        this.days = [];
        this.months = [
            { id: 0, month: "Month" },
            { id: 1, month: "JANUARY" },
            { id: 2, month: "FEBRUARY" },
            { id: 3, month: "MARCH" },
            { id: 4, month: "APRIL" },
            { id: 5, month: "MAY" },
            { id: 6, month: "JUNE" },
            { id: 7, month: "JULY" },
            { id: 8, month: "AUGUST" },
            { id: 9, month: "SEPTEMBER" },
            { id: 10, month: "OCTOBER" },
            { id: 11, month: "NOVEMBER" },
            { id: 12, month: "DECEMBER" }
        ];
        this.years = [];
        this.children = [
            0, 1, 2, 3, 4, 5, 6, 7, 8, 9
        ];
        this.ready = false;
    }
    ApplyComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.api.getCountries()
            .subscribe(function (countries) {
            _this.countries = countries;
            _this.countries.unshift({ 'country': 'Select a country', pass: 0 });
            _this.applicant = {
                title: _this.titles[0],
                firstname: "",
                lastname: "",
                education: _this.educations[0],
                experience: _this.workExperiences[0],
                country: _this.countries[0],
                marital: _this.maritals[0],
                gender: _this.genders[0],
                address: { line1: "", line2: "", postal: "", city: "", country: _this.countries[0] },
                birth: { day: _this.days[0], month: _this.months[0], year: _this.years[0] },
                children: 0,
                spouse: {
                    country: _this.countries[0]
                },
                mother: {
                    country: _this.countries[0]
                },
                father: {
                    country: _this.countries[0]
                }
            };
            _this.ready = true;
        });
        this.days.push({ id: 0, day: 'Day' });
        for (var x = 1; x <= 31; x++) {
            this.days.push({ id: x, day: x });
        }
        this.years.push({ id: 0, year: 'Year' });
        for (var x = 2016; x >= 1900; x--) {
            this.years.push({ id: x, year: x });
        }
    };
    ApplyComponent.prototype.eligible = function () {
        if (this.applicant.country.pass || this.applicant.spouse.country.pass || this.applicant.father.country.pass || this.applicant.mother.country.pass) {
            return true;
        }
        return false;
    };
    ApplyComponent.prototype.finished = function () {
        if (this.applicant.experience.finish || this.applicant.country.pass || this.applicant.spouse.country.pass || this.applicant.mother.country.pass || this.applicant.father.country.pass) {
            return true;
        }
        if (this.applicant.father.country != this.countries[0]) {
            return true;
        }
        return false;
    };
    ApplyComponent.prototype.educationChange = function () {
        this.applicant.experience = this.workExperiences[0];
        this.applicant.country = this.countries[0];
        this.applicant.marital = this.maritals[0];
        this.applicant.spouse.country = this.countries[0];
        this.applicant.mother.country = this.countries[0];
        this.applicant.father.country = this.countries[0];
    };
    ApplyComponent.prototype.workChange = function () {
        this.applicant.country = this.countries[0];
        this.applicant.marital = this.maritals[0];
        this.applicant.spouse.country = this.countries[0];
        this.applicant.mother.country = this.countries[0];
        this.applicant.father.country = this.countries[0];
    };
    ApplyComponent.prototype.appCountryChange = function () {
        this.applicant.marital = this.maritals[0];
        this.applicant.spouse.country = this.countries[0];
        this.applicant.mother.country = this.countries[0];
        this.applicant.father.country = this.countries[0];
    };
    ApplyComponent.prototype.maritalChange = function () {
        this.applicant.spouse.country = this.countries[0];
        this.applicant.mother.country = this.countries[0];
        this.applicant.father.country = this.countries[0];
    };
    ApplyComponent.prototype.spouseChange = function () {
        this.applicant.mother.country = this.countries[0];
        this.applicant.father.country = this.countries[0];
    };
    ApplyComponent.prototype.motherChange = function () {
        this.applicant.father.country = this.countries[0];
    };
    ApplyComponent.prototype.goto = function (state) {
        this.state = state;
    };
    ApplyComponent.prototype.registrationCheck = function () {
        if (this.applicant.firstname.length > 1 &&
            this.applicant.lastname.length > 1 &&
            this.applicant.title.id && this.applicant.titles != this.titles[0] &&
            this.applicant.gender.id && this.applicant.gender != this.genders[0] &&
            this.applicant.education.id && this.applicant.education != this.educations[0] &&
            this.applicant.experience.id && this.applicant.experience != this.workExperiences[0] &&
            this.applicant.country.id && this.applicant.country != this.countries[0] &&
            this.applicant.marital.id && this.applicant.marital && this.countries[0] &&
            this.applicant.email &&
            this.applicant.confirmEmail &&
            this.applicant.email === this.applicant.confirmEmail &&
            this.applicant.address.line1.length > 1 &&
            this.applicant.address.postal.length > 1 &&
            this.applicant.address.city.length > 1 &&
            this.applicant.address.country.id && this.applicant.address.country != this.countries[0] &&
            this.applicant.birth.day.id && this.applicant.birth.month.id && this.applicant.birth.year.id) {
            return true;
        }
        return false;
    };
    ApplyComponent.prototype.send = function (application) {
        application.birthday = moment().year(application.birth.year.id).month(application.birth.month.id - 1).date(application.birth.day.id).format('YYYY-MM-DD');
        this.api.postApplication(application)
            .subscribe(function (result) { return console.log(result); });
    };
    ApplyComponent = __decorate([
        core_1.Component({
            moduleId: module.id,
            templateUrl: 'apply.component.html',
            styleUrls: ['apply.component.css'],
            directives: [index_2.NavigationComponent]
        }), 
        __metadata('design:paramtypes', [index_1.ApiService])
    ], ApplyComponent);
    return ApplyComponent;
}());
exports.ApplyComponent = ApplyComponent;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC8rYXBwbHkvb2xkLWFwcGx5L2FwcGx5LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEscUJBQWtDLGVBQWUsQ0FBQyxDQUFBO0FBRWxELHNCQUEyQixpQkFBaUIsQ0FBQyxDQUFBO0FBQzdDLHNCQUFvQyx1QkFBdUIsQ0FBQyxDQUFBO0FBWTVEO0lBa0VFLHdCQUFvQixHQUFlO1FBQWYsUUFBRyxHQUFILEdBQUcsQ0FBWTtRQS9EM0IsVUFBSyxHQUFXLENBQUMsQ0FBQztRQUVsQixlQUFVLEdBQVM7WUFDekIsRUFBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxlQUFlLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBQztZQUM1QyxFQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLHdCQUF3QixFQUFFLElBQUksRUFBRSxLQUFLLEVBQUM7WUFDckQsRUFBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxhQUFhLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBQztZQUN6QyxFQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFDO1lBQ3JDLEVBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsYUFBYSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUM7U0FDMUMsQ0FBQztRQUVNLG9CQUFlLEdBQVM7WUFDOUIsRUFBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxlQUFlLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFDO1lBQzNELEVBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsbUJBQW1CLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO1lBQy9ELEVBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsaUJBQWlCLEVBQUUs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QUFDO1FBQ2xELElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2xELElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3BELENBQUM7SUFFRCxtQ0FBVSxHQUFWO1FBQ0UsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMzQyxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzFDLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2xELElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2xELElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3BELENBQUM7SUFFRCx5Q0FBZ0IsR0FBaEI7UUFDRSxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzFDLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2xELElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2xELElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsU0FBUyxD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QSxBQTBNQyxJQUFBO0FBMU1ZLHNCQUFjLGlCQTBNMUIsQ0FBQSIsImZpbGUiOiJhcHAvK2FwcGx5L29sZC1hcHBseS9hcHBseS5jb21wb25lbnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgUkVBQ1RJVkVfRk9STV9ESVJFQ1RJVkVTIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgQXBpU2VydmljZSB9IGZyb20gJy4uLy4uL2FwaS9pbmRleCc7XG5pbXBvcnQgeyBOYXZpZ2F0aW9uQ29tcG9uZW50IH0gZnJvbSAnLi8uLi9uYXZpZ2F0aW9uL2luZGV4JztcblxuLyoqXG4gKiBUaGlzIGNsYXNzIHJlcHJlc2VudHMgdGhlIGxhenkgbG9hZGVkIEhvbWVDb21wb25lbnQuXG4gKi9cbmRlY2xhcmUgdmFyIG1vbWVudDogYW55OyBcbkBDb21wb25lbnQoe1xuICBtb2R1bGVJZDogbW9kdWxlLmlkLFxuICB0ZW1wbGF0ZVVybDogJ2FwcGx5LmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJ2FwcGx5LmNvbXBvbmVudC5jc3MnXSxcbiAgZGlyZWN0aXZlczogW05hdmlnYXRpb25Db21wb25lbnRdXG59KVxuZXhwb3J0IGNsYXNzIEFwcGx5Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgcHJpdmF0ZSBhcHBsaWNhbnQ6IGFueTtcblxuICBwcml2YXRlIHN0YXRlOiBudW1iZXIgPSAxO1xuXG4gIHByaXZhdGUgZWR1Y2F0aW9uczogYW55W10gPVtcbiAgICB7aWQ6IDAsIGxldmVsOiBcIlNlbGVjdCBPcHRpb25cIiwgcGFzczogZmFsc2V9LFxuICAgIHtpZDogMSwgbGV2ZWw6IFwiTWlkZGxlIFNjaG9vbCBvciBiZWxvd1wiLCBwYXNzOiBmYWxzZX0sXG4gICAge2lkOiAyLCBsZXZlbDogXCJIaWdoIFNjaG9vbFwiLCBwYXNzOiB0cnVlfSxcbiAgICB7aWQ6IDMsIGxldmVsOiBcIkNvbGxlZ2VcIiwgcGFzczogdHJ1ZX0sXG4gICAge2lkOiA0LCBsZXZlbDogXCJHcmFkIFNjaG9vbFwiLCBwYXNzOiB0cnVlfVxuICBdO1xuXG4gIHByaXZhdGUgd29ya0V4cGVyaWVuY2VzOiBhbnlbXSA9W1xuICAgIHtpZDogMCwgbGV2ZWw6IFwiU2VsZWN0IE9wdGlvblwiLCBwYXNzOiBmYWxzZSwgZmluaXNoOiBmYWxzZX0sXG4gICAge2lkOiAxLCBsZXZlbDogXCJMZXNzIHRoYW4gMiBZZWFyc1wiLCBwYXNzOiBmYWxzZSwgZmluaXNoOiB0cnVlIH0sXG4gICAge2lkOiAyLCBsZXZlbDogXCIyIFllYXJzIG9yIE1vcmVcIiwgcGFzczogdHJ1ZSwgZmluaXNoOiBmYWxzZSB9XG4gIF1cblxuICBwcml2YXRlIGNvdW50cmllczogYW55W107XG5cbiAgcHJpdmF0ZSBtYXJpdGFsczogYW55W10gPSBbXG4gICAge2lkOiAwLCByZXNwb25zZTogXCJTZWxlY3QgT3B0aW9uXCIsIGFuc3dlcjogXCJTZWxlY3QgT3B0aW9uXCIsIHN0YXR1czogZmFsc2V9LFxuICAgIHtpZDogMSwgcmVzcG9uc2U6IFwiTm9cIiwgYW5zd2VyOiBcIlNpbmdsZVwiLCBzdGF0dXM6IGZhbHNlLCB9LFxuICAgIHtpZDogMiwgcmVzcG9uc2U6IFwiWWVzXCIsIGFuc3dlcjogXCJNYXJyaWVkXCIsIHN0YXR1czogdHJ1ZX1cbiAgXTtcblxuICBwcml2YXRlIHRpdGxlczogYW55W10gPSBbXG4gICAge2lkOiAwLCB0aXRsZTogXCJTZWxlY3QgYSB0aXRsZVwifSxcbiAgICB7aWQ6IDEsIHRpdGxlOiBcIk1yXCJ9LFxuICAgIHtpZDogMiwgdGl0bGU6IFwiTXNcIn0sXG4gICAge2lkOiAzLCB0aXRsZTogXCJEb2N0b3JcIn1cbiAgXVxuXG4gIHByaXZhdGUgZ2VuZGVyczogYW55W10gPSBbXG4gICAge2lkOiAwLCBnZW5kZXI6IFwiU2VsZWN0IGEgZ2VuZGVyXCJ9LFxuICAgIHtpZDogMSwgZ2VuZGVyOiBcIk1hbGVcIn0sXG4gICAge2lkOiAyLCBnZW5kZXI6IFwiRmVtYWxlXCJ9XG4gIF1cblxuICBwcml2YXRlIGRheXM6IGFueVtdID0gW107XG5cbiAgcHJpdmF0ZSBtb250aHM6IGFueVtdID0gW1xuICAgIHtpZDogMCwgbW9udGg6IFwiTW9udGhcIn0sXG4gICAge2lkOiAxLCBtb250aDogXCJKQU5VQVJZXCJ9LFxuICAgIHtpZDogMiwgbW9udGg6IFwiRkVCUlVBUllcIn0sXG4gICAge2lkOiAzLCBtb250aDogXCJNQVJDSFwifSxcbiAgICB7aWQ6IDQsIG1vbnRoOiBcIkFQUklMXCJ9LFxuICAgIHtpZDogNSwgbW9udGg6IFwiTUFZXCJ9LFxuICAgIHtpZDogNiwgbW9udGg6IFwiSlVORVwifSxcbiAgICB7aWQ6IDcsIG1vbnRoOiBcIkpVTFlcIn0sXG4gICAge2lkOiA4LCBtb250aDogXCJBVUdVU1RcIn0sXG4gICAge2lkOiA5LCBtb250aDogXCJTRVBURU1CRVJcIn0sXG4gICAge2lkOiAxMCwgbW9udGg6IFwiT0NUT0JFUlwifSxcbiAgICB7aWQ6IDExLCBtb250aDogXCJOT1ZFTUJFUlwifSxcbiAgICB7aWQ6IDEyLCBtb250aDogXCJERUNFTUJFUlwifVxuICBdXG5cbiAgcHJpdmF0ZSB5ZWFyczogYW55W10gPSBbXTtcblxuICBwcml2YXRlIGNoaWxkcmVuOiBudW1iZXJbXSA9IFtcbiAgICAwLCAxLCAyLCAzLCA0LCA1LCA2LCA3LCA4LCA5XG4gIF1cblxuICBwcml2YXRlIHJlYWR5OiBib29sZWFuID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBhcGk6IEFwaVNlcnZpY2UpIHt9XG5cbiAgbmdPbkluaXQoKXtcbiAgICB0aGlzLmFwaS5nZXRDb3VudHJpZXMoKVxuICAgICAgLnN1YnNjcmliZShjb3VudHJpZXMgPT4ge1xuICAgICAgICAgIHRoaXMuY291bnRyaWVzID0gY291bnRyaWVzO1xuICAgICAgICAgIHRoaXMuY291bnRyaWVzLnVuc2hpZnQoeydjb3VudHJ5JzogJ1NlbGVjdCBhIGNvdW50cnknLCBwYXNzOiAwfSk7XG5cbiAgICAgICAgICB0aGlzLmFwcGxpY2FudCA9IHtcbiAgICAgICAgICAgIHRpdGxlOiB0aGlzLnRpdGxlc1swXSxcbiAgICAgICAgICAgIGZpcnN0bmFtZTogXCJcIixcbiAgICAgICAgICAgIGxhc3RuYW1lOiBcIlwiLFxuICAgICAgICAgICAgZWR1Y2F0aW9uOiB0aGlzLmVkdWNhdGlvbnNbMF0sXG4gICAgICAgICAgICBleHBlcmllbmNlOiB0aGlzLndvcmtFeHBlcmllbmNlc1swXSxcbiAgICAgICAgICAgIGNvdW50cnk6IHRoaXMuY291bnRyaWVzWzBdLFxuICAgICAgICAgICAgbWFyaXRhbDogdGhpcy5tYXJpdGFsc1swXSxcbiAgICAgICAgICAgIGdlbmRlcjogdGhpcy5nZW5kZXJzWzBdLFxuICAgICAgICAgICAgYWRkcmVzczoge2xpbmUxOiBcIlwiLCBsaW5lMjogXCJcIiwgcG9zdGFsOlwiXCIsIGNpdHk6IFwiXCIsIGNvdW50cnk6IHRoaXMuY291bnRyaWVzWzBdfSxcbiAgICAgICAgICAgIGJpcnRoOiB7ZGF5OiB0aGlzLmRheXNbMF0sIG1vbnRoOiB0aGlzLm1vbnRoc1swXSwgeWVhcjogdGhpcy55ZWFyc1swXX0sXG4gICAgICAgICAgICBjaGlsZHJlbjogMCxcbiAgICAgICAgICAgIHNwb3VzZToge1xuICAgICAgICAgICAgICBjb3VudHJ5OiB0aGlzLmNvdW50cmllc1swXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1vdGhlcjoge1xuICAgICAgICAgICAgICBjb3VudHJ5OiB0aGlzLmNvdW50cmllc1swXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZhdGhlcjoge1xuICAgICAgICAgICAgICBjb3VudHJ5OiB0aGlzLmNvdW50cmllc1swXVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMucmVhZHkgPSB0cnVlO1xuICAgICAgICB9KTtcblxuICAgIHRoaXMuZGF5cy5wdXNoKHtpZDogMCwgZGF5OiAnRGF5J30pO1xuICAgIGZvcihsZXQgeCA9IDE7IHggPD0gMzE7IHgrKyl7XG4gICAgICB0aGlzLmRheXMucHVzaCh7aWQ6IHgsIGRheTogeH0pXG4gICAgfVxuXG4gICAgdGhpcy55ZWFycy5wdXNoKHtpZDogMCwgeWVhcjogJ1llYXInfSk7XG4gICAgZm9yKGxldCB4ID0gMjAxNjsgeCA+PSAxOTAwOyB4LS0pe1xuICAgICAgdGhpcy55ZWFycy5wdXNoKHtpZDogeCwgeWVhcjogeH0pO1xuICAgIH1cbiAgfVxuXG4gIGVsaWdpYmxlKCl7XG4gICAgaWYodGhpcy5hcHBsaWNhbnQuY291bnRyeS5wYXNzIHx8IHRoaXMuYXBwbGljYW50LnNwb3VzZS5jb3VudHJ5LnBhc3MgfHwgdGhpcy5hcHBsaWNhbnQuZmF0aGVyLmNvdW50cnkucGFzcyB8fCB0aGlzLmFwcGxpY2FudC5tb3RoZXIuY291bnRyeS5wYXNzKXtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBmaW5pc2hlZCgpe1xuICAgIGlmKHRoaXMuYXBwbGljYW50LmV4cGVyaWVuY2UuZmluaXNoIHx8IHRoaXMuYXBwbGljYW50LmNvdW50cnkucGFzcyB8fCB0aGlzLmFwcGxpY2FudC5zcG91c2UuY291bnRyeS5wYXNzIHx8IHRoaXMuYXBwbGljYW50Lm1vdGhlci5jb3VudHJ5LnBhc3MgfHwgdGhpcy5hcHBsaWNhbnQuZmF0aGVyLmNvdW50cnkucGFzcyl7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYodGhpcy5hcHBsaWNhbnQuZmF0aGVyLmNvdW50cnkgIT0gdGhpcy5jb3VudHJpZXNbMF0pe1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZWR1Y2F0aW9uQ2hhbmdlKCl7XG4gICAgdGhpcy5hcHBsaWNhbnQuZXhwZXJpZW5jZSA9IHRoaXMud29ya0V4cGVyaWVuY2VzWzBdO1xuICAgIHRoaXMuYXBwbGljYW50LmNvdW50cnkgPSB0aGlzLmNvdW50cmllc1swXTtcbiAgICB0aGlzLmFwcGxpY2FudC5tYXJpdGFsID0gdGhpcy5tYXJpdGFsc1swXTtcbiAgICB0aGlzLmFwcGxpY2FudC5zcG91c2UuY291bnRyeSA9IHRoaXMuY291bnRyaWVzWzBdO1xuICAgIHRoaXMuYXBwbGljYW50Lm1vdGhlci5jb3VudHJ5ID0gdGhpcy5jb3VudHJpZXNbMF07XG4gICAgdGhpcy5hcHBsaWNhbnQuZmF0aGVyLmNvdW50cnkgPSB0aGlzLmNvdW50cmllc1swXTtcbiAgfVxuXG4gIHdvcmtDaGFuZ2UoKXtcbiAgICB0aGlzLmFwcGxpY2FudC5jb3VudHJ5ID0gdGhpcy5jb3VudHJpZXNbMF07XG4gICAgdGhpcy5hcHBsaWNhbnQubWFyaXRhbCA9IHRoaXMubWFyaXRhbHNbMF07XG4gICAgdGhpcy5hcHBsaWNhbnQuc3BvdXNlLmNvdW50cnkgPSB0aGlzLmNvdW50cmllc1swXTtcbiAgICB0aGlzLmFwcGxpY2FudC5tb3RoZXIuY291bnRyeSA9IHRoaXMuY291bnRyaWVzWzBdO1xuICAgIHRoaXMuYXBwbGljYW50LmZhdGhlci5jb3VudHJ5ID0gdGhpcy5jb3VudHJpZXNbMF07XG4gIH1cblxuICBhcHBDb3VudHJ5Q2hhbmdlKCl7XG4gICAgdGhpcy5hcHBsaWNhbnQubWFyaXRhbCA9IHRoaXMubWFyaXRhbHNbMF07XG4gICAgdGhpcy5hcHBsaWNhbnQuc3BvdXNlLmNvdW50cnkgPSB0aGlzLmNvdW50cmllc1swXTtcbiAgICB0aGlzLmFwcGxpY2FudC5tb3RoZXIuY291bnRyeSA9IHRoaXMuY291bnRyaWVzWzBdO1xuICAgIHRoaXMuYXBwbGljYW50LmZhdGhlci5jb3VudHJ5ID0gdGhpcy5jb3VudHJpZXNbMF07XG4gIH1cblxuICBtYXJpdGFsQ2hhbmdlKCl7XG4gICAgdGhpcy5hcHBsaWNhbnQuc3BvdXNlLmNvdW50cnkgPSB0aGlzLmNvdW50cmllc1swXTtcbiAgICB0aGlzLmFwcGxpY2FudC5tb3RoZXIuY291bnRyeSA9IHRoaXMuY291bnRyaWVzWzBdO1xuICAgIHRoaXMuYXBwbGljYW50LmZhdGhlci5jb3VudHJ5ID0gdGhpcy5jb3VudHJpZXNbMF07XG4gIH1cblxuICBzcG91c2VDaGFuZ2UoKXtcbiAgICB0aGlzLmFwcGxpY2FudC5tb3RoZXIuY291bnRyeSA9IHRoaXMuY291bnRyaWVzWzBdO1xuICAgIHRoaXMuYXBwbGljYW50LmZhdGhlci5jb3VudHJ5ID0gdGhpcy5jb3VudHJpZXNbMF07XG4gIH1cbiAgXG5cbiAgbW90aGVyQ2hhbmdlKCl7XG4gICAgdGhpcy5hcHBsaWNhbnQuZmF0aGVyLmNvdW50cnkgPSB0aGlzLmNvdW50cmllc1swXTtcbiAgfVxuXG4gIGdvdG8oc3RhdGU6IG51bWJlcil7XG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICB9XG5cbiAgcmVnaXN0cmF0aW9uQ2hlY2soKXtcbiAgICBpZihcbiAgICAgIHRoaXMuYXBwbGljYW50LmZpcnN0bmFtZS5sZW5ndGggPiAxICYmXG4gICAgICB0aGlzLmFwcGxpY2FudC5sYXN0bmFtZS5sZW5ndGggPiAxICYmXG4gICAgICB0aGlzLmFwcGxpY2FudC50aXRsZS5pZCAmJiB0aGlzLmFwcGxpY2FudC50aXRsZXMgIT0gdGhpcy50aXRsZXNbMF0gJiZcbiAgICAgIHRoaXMuYXBwbGljYW50LmdlbmRlci5pZCAmJiB0aGlzLmFwcGxpY2FudC5nZW5kZXIgIT0gdGhpcy5nZW5kZXJzWzBdICYmXG4gICAgICB0aGlzLmFwcGxpY2FudC5lZHVjYXRpb24uaWQgJiYgdGhpcy5hcHBsaWNhbnQuZWR1Y2F0aW9uICE9IHRoaXMuZWR1Y2F0aW9uc1swXSAmJlxuICAgICAgdGhpcy5hcHBsaWNhbnQuZXhwZXJpZW5jZS5pZCAmJiB0aGlzLmFwcGxpY2FudC5leHBlcmllbmNlICE9IHRoaXMud29ya0V4cGVyaWVuY2VzWzBdICYmXG4gICAgICB0aGlzLmFwcGxpY2FudC5jb3VudHJ5LmlkICYmIHRoaXMuYXBwbGljYW50LmNvdW50cnkgIT0gdGhpcy5jb3VudHJpZXNbMF0gJiZcbiAgICAgIHRoaXMuYXBwbGljYW50Lm1hcml0YWwuaWQgJiYgdGhpcy5hcHBsaWNhbnQubWFyaXRhbCAmJiB0aGlzLmNvdW50cmllc1swXSAmJlxuICAgICAgdGhpcy5hcHBsaWNhbnQuZW1haWwgJiZcbiAgICAgIHRoaXMuYXBwbGljYW50LmNvbmZpcm1FbWFpbCAmJlxuICAgICAgdGhpcy5hcHBsaWNhbnQuZW1haWwgPT09IHRoaXMuYXBwbGljYW50LmNvbmZpcm1FbWFpbCAmJlxuICAgICAgdGhpcy5hcHBsaWNhbnQuYWRkcmVzcy5saW5lMS5sZW5ndGggPiAxICYmXG4gICAgICB0aGlzLmFwcGxpY2FudC5hZGRyZXNzLnBvc3RhbC5sZW5ndGggPiAxICYmXG4gICAgICB0aGlzLmFwcGxpY2FudC5hZGRyZXNzLmNpdHkubGVuZ3RoID4gMSAmJlxuICAgICAgdGhpcy5hcHBsaWNhbnQuYWRkcmVzcy5jb3VudHJ5LmlkICYmIHRoaXMuYXBwbGljYW50LmFkZHJlc3MuY291bnRyeSAhPSB0aGlzLmNvdW50cmllc1swXSAmJlxuICAgICAgdGhpcy5hcHBsaWNhbnQuYmlydGguZGF5LmlkICYmIHRoaXMuYXBwbGljYW50LmJpcnRoLm1vbnRoLmlkICYmIHRoaXMuYXBwbGljYW50LmJpcnRoLnllYXIuaWQpXG4gICAgICB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzZW5kKGFwcGxpY2F0aW9uOiBhbnkpe1xuICAgIGFwcGxpY2F0aW9uLmJpcnRoZGF5ID0gbW9tZW50KCkueWVhcihhcHBsaWNhdGlvbi5iaXJ0aC55ZWFyLmlkKS5tb250aChhcHBsaWNhdGlvbi5iaXJ0aC5tb250aC5pZC0xKS5kYXRlKGFwcGxpY2F0aW9uLmJpcnRoLmRheS5pZCkuZm9ybWF0KCdZWVlZLU1NLUREJyk7XG4gICAgdGhpcy5hcGkucG9zdEFwcGxpY2F0aW9uKGFwcGxpY2F0aW9uKVxuICAgICAgLnN1YnNjcmliZShyZXN1bHQgPT4gY29uc29sZS5sb2cocmVzdWx0KSk7XG4gIH1cblxufVxuIl19
